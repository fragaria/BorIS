{% extends "admin/change_form.html" %}
{% load i18n %}

{% block extrahead %}
    {{ block.super }}
    <style>
        .inactive { color: #DDD; }
    </style>
    <script type="text/javascript">
        function dismissAddAnamnesisPopup(win, newId, newRepr) {
            django.jQuery('#add_id_anamnesis').attr('href', '/clients/anamnesis/' + newId + '/');
            django.jQuery('#add_id_anamnesis').html('{% trans "Zobrazit &raquo;" %}');
            win.close();
            return false;
        }
        /**
         * Ensure, that when no primary drug is selected, no application type
         * is selected as well.
         */
        (function ($) {
            
            $(document).ready(function () {
                $('#id_primary_drug').change(function () {
                    if ($(this).val() == '') {
                        $('#id_primary_drug_usage option[value!=]').hide();
                        $('#id_primary_drug_usage').val('');
                    } else
                        $('#id_primary_drug_usage option[value!=]').show();
                    return true; 
                });
                $('#id_primary_drug').change();
                
                $('#id_birthdate_year_only').change(function () {
                    if ($(this).attr('checked') == 'checked') {
                        $('#id_birthdate_day, #id_birthdate_month').val('1');
                        $('#id_birthdate_day, #id_birthdate_month').addClass('inactive');
                    } else {
                        $('#id_birthdate_day, #id_birthdate_month').removeClass('inactive');
                    }
                });
                $('#id_birthdate_year_only').change();
            });
            
        })(django.jQuery);
    </script>
{% endblock %}

{% block after_related_objects %}
    {% include "admin/clients/client/note_list.html" %}
{% endblock %}

